{"componentChunkName":"component---src-templates-blog-post-blog-post-tsx","path":"/post/2020-10/antialiasing/","result":{"data":{"markdownRemark":{"html":"<p>If you look closely at the images we are producing you will see an effect known as \"<a href=\"https://en.wikipedia.org/wiki/Jaggies\">jaggies</a>\":</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9ElEQVQ4y4XQ609adxzH8fNf7MEeLNmSPdqSPWi2mrU2TrtpN+pkU6c4sV6nTKlU2Hr0yMXVtluMVHCgaKGipVZ0yMBaqSKpaOOlG3az0ioHUVABucPhci471mQ129Il76ev8/n+DtAJ4SIIl0CYDMLkEKqEkioooYbiGiimgyJTUNAI+cyQZwlyrXIdds6qZXxv2k6YnuKzVgLoBHERiEtBTAaicjClBJMqMKEGEQ0Y04HhKTBoBH1m0LN02bXa7LCzLBata8ZBmKyY6TkOdHJwEQeXcjAZB5VzUkpOUsWJq9mIhh3VscNT7KCR7TOz3UtNridNsK1p7fEc8tBGmK24+Rm5fAkXXcKkLEzGQuWslJKVVLHiahaiYUX1jeGpxoCx8WD+onv5ovOPBvg553f9+vJ9p3vG7p/e8gFCJiZmYhImKmOm5MykkplQNcTVDTFNQ0RfHzLU+2frvfPf7i/Xb69XwSvtxjacfQXnXkX5VzE+IGRgYgYqYaB9jJSckVQyEioGoq6LjteF9XVBQ61vttaz8M3ucu3WRglskmq5BNiGQQKihQwQ1qDiGlRSk+qrTiqqE8pqRFUdG62KjFeFJqoChsoDU6V7ocK5UgnbiqwD85IW4vs2jCsgWskAYUVKXJGSVCT7KhKK8vhgOXKnPDp6Iay9EJwo8z8o85joe4/o26tFNkv9wvVQG5eA+HjrCwwBQnpSTE9I6Yk+elxBjw2WxoZLI2OlIe3XgXsl3mma+2Gx61EJvE7ZUI8NNhOXBSiXT7QeBQhpCTEtLqUh/TREURwdKg7fLQ6NFQV+/co3WeiZKdydK3Cs5MKPyxavBX44mj2GCxFxASItiPUXRG/lR4byQ8P5gV++9Om+8N6n7hnzdsxU25Ms69C4vJkABSiPT3D/DrhBjXVTo1JqpJ8avpUXup0XGPncp8n16nP3DRSn8Ty8ctpm+G6KS7Twce5x+QKfj3RTwj2U0E1KcOCzwO1PfSPnPOPn9ieyXYYc+1zG5nze4k/b16DDg3m8f+KcUHdOsCc7cDPbP/DJgepjj/rsnjbLOXHWbkqD59MtnU87WshZ7FAedQxn+buz/L2ZB/JMjzJj/07G7uiZHW0GbHh/0/jRbz33JORT+ehLefwTQFe69+d0T+9pt/zU7tCHzuFTW6NnNibf2ZzMXOxYIzdBQYr/b3kU0JW2Jzm5K/tgR3FyazDNpn7Xpn/z2d3qyR83r0Pktf+1+RKLTjgkJ+x978HKt20jr28Mpy906Xp58dZDib9KHmLxG7DsNZv8rT/7qcbursEr7naIaOZhPD5GXst7dYAw70HHjaH2tQ5eikcyLvknSIbz/leS/QUhSB2zAMlZmgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Jaggie sphere edge\"\n        title=\"Jaggie sphere edge\"\n        src=\"/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png\"\n        srcset=\"/static/2915b0569f0479d36a85b8569e570696/0608e/before-antialiasing.png 225w,\n/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Jaggie sphere edge</figcaption>\n  </figure></p>\n<p>We can use antialiasing to help smooth these edges, and make our image more realistic.</p>\n<p>Antialiasing works by averaging multiple random samples for each pixel.</p>\n<h3 id=\"some-random-number-utilities\" style=\"position:relative;\"><a href=\"#some-random-number-utilities\" aria-label=\"some random number utilities permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Some Random Number Utilities</h3>\n<p>First we need to generate some random numbers.\nTo easily access a random number generator in Rust we add a crate to our <code>Cargo.toml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token punctuation\">[</span><span class=\"token table class-name\">package</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"ray-tracing-in-one-weekend-with-rust\"</span>\n<span class=\"token key property\">version</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"0.1.0\"</span>\n<span class=\"token key property\">authors</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"austind\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">edition</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"2018\"</span>\n\n<span class=\"token comment\"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">dependencies</span><span class=\"token punctuation\">]</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key property\">rand</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"0.7.3\"</span></span></code></pre></div>\n<p>There is a good chance in the future we will replace this random number generator with something a bit faster.\nTo help when that time comes we will define a few utility functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">f64</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">thread_rng</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">gen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[allow(dead_code)]</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">random_range</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">f64</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">thread_rng</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">gen_range</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"generating-pixels-with-multiple-samples\" style=\"position:relative;\"><a href=\"#generating-pixels-with-multiple-samples\" aria-label=\"generating pixels with multiple samples permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generating Pixels with Multiple Samples</h3>\n<p>First let's move our camera code into an independent <code>struct</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Camera</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">pub</span> origin<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Point3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> lower_left_corner<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Point3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> horizontal<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> vertical<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec3</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Camera</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>aspect_ratio<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> viewport_height<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> focal_length<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> origin<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Point3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token class-name\">Camera</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> viewport_width <span class=\"token operator\">=</span> aspect_ratio <span class=\"token operator\">*</span> viewport_height<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> horizontal <span class=\"token operator\">=</span> <span class=\"token class-name\">Vec3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>viewport_width<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> vertical <span class=\"token operator\">=</span> <span class=\"token class-name\">Vec3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> viewport_height<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Camera</span> <span class=\"token punctuation\">{</span>\n            origin<span class=\"token punctuation\">,</span>\n            horizontal<span class=\"token punctuation\">,</span>\n            vertical<span class=\"token punctuation\">,</span>\n            lower_left_corner<span class=\"token punctuation\">:</span> origin <span class=\"token operator\">-</span> horizontal <span class=\"token operator\">/</span> <span class=\"token number\">2.0</span> <span class=\"token operator\">-</span> vertical <span class=\"token operator\">/</span> <span class=\"token number\">2.0</span> <span class=\"token operator\">-</span> <span class=\"token class-name\">Vec3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> focal_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">get_ray</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> u<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token class-name\">Ray</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Ray</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lower_left_corner <span class=\"token operator\">+</span> u <span class=\"token operator\">*</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>horizontal <span class=\"token operator\">+</span> v <span class=\"token operator\">*</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>vertical <span class=\"token operator\">-</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Then update our <code>write_color</code> function to average out our pixel color:</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">clamp</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> min<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">f64</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> x <span class=\"token operator\">&lt;</span> min <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        min</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">></span> max <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        max</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        x</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">write_color</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Write</span><span class=\"token punctuation\">,</span> color<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">,</span> samples_per_pixel<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> scale <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> samples_per_pixel <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> r <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> scale<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> g <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> scale<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span><span class=\"token function\">z</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> scale<span class=\"token punctuation\">;</span></span>\n    <span class=\"token macro property\">write!</span><span class=\"token punctuation\">(</span>\n        f<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"{} {} {}\\n\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">(</span><span class=\"token number\">256.0</span> <span class=\"token operator\">*</span> <span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">(</span><span class=\"token number\">256.0</span> <span class=\"token operator\">*</span> <span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">(</span><span class=\"token number\">256.0</span> <span class=\"token operator\">*</span> <span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Then update <code>main</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> aspect_ratio <span class=\"token operator\">=</span> <span class=\"token number\">16.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">9.0</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> image_width <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> image_height <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>image_width <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">/</span> aspect_ratio<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> samples_per_pixel <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> world <span class=\"token operator\">=</span> <span class=\"token class-name\">HittableList</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    world<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Sphere</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Point3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    world<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Sphere</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Point3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">100.5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> world <span class=\"token operator\">=</span> world<span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> cam <span class=\"token operator\">=</span> <span class=\"token class-name\">Camera</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>aspect_ratio<span class=\"token punctuation\">,</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Point3</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token macro property\">print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"P3\\n{} {}\\n255\\n\"</span><span class=\"token punctuation\">,</span> image_width<span class=\"token punctuation\">,</span> image_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span>image_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">rev</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token macro property\">eprint!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\rScanlines remaining: {} \"</span><span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span>image_width <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> pixel_color <span class=\"token operator\">=</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span>samples_per_pixel <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">let</span> u <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">+</span> <span class=\"token namespace\">random<span class=\"token punctuation\">::</span></span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>image_width <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">+</span> <span class=\"token namespace\">random<span class=\"token punctuation\">::</span></span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>image_height <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">let</span> r <span class=\"token operator\">=</span> cam<span class=\"token punctuation\">.</span><span class=\"token function\">get_ray</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">                pixel_color <span class=\"token operator\">+=</span> <span class=\"token function\">ray_color</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>r<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>world<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token function\">write_color</span><span class=\"token punctuation\">(</span><span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token function\">stdout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> pixel_color<span class=\"token punctuation\">,</span> samples_per_pixel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token macro property\">eprint!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nDone.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This results in a much smoother image:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9ElEQVQ4y4XQ609adxzH8fNf7MEeLNmSPdqSPWi2mrU2TrtpN+pkU6c4sV6nTKlU2Hr0yMXVtluMVHCgaKGipVZ0yMBaqSKpaOOlG3az0ioHUVABucPhci471mQ129Il76ev8/n+DtAJ4SIIl0CYDMLkEKqEkioooYbiGiimgyJTUNAI+cyQZwlyrXIdds6qZXxv2k6YnuKzVgLoBHERiEtBTAaicjClBJMqMKEGEQ0Y04HhKTBoBH1m0LN02bXa7LCzLBata8ZBmKyY6TkOdHJwEQeXcjAZB5VzUkpOUsWJq9mIhh3VscNT7KCR7TOz3UtNridNsK1p7fEc8tBGmK24+Rm5fAkXXcKkLEzGQuWslJKVVLHiahaiYUX1jeGpxoCx8WD+onv5ovOPBvg553f9+vJ9p3vG7p/e8gFCJiZmYhImKmOm5MykkplQNcTVDTFNQ0RfHzLU+2frvfPf7i/Xb69XwSvtxjacfQXnXkX5VzE+IGRgYgYqYaB9jJSckVQyEioGoq6LjteF9XVBQ61vttaz8M3ucu3WRglskmq5BNiGQQKihQwQ1qDiGlRSk+qrTiqqE8pqRFUdG62KjFeFJqoChsoDU6V7ocK5UgnbiqwD85IW4vs2jCsgWskAYUVKXJGSVCT7KhKK8vhgOXKnPDp6Iay9EJwo8z8o85joe4/o26tFNkv9wvVQG5eA+HjrCwwBQnpSTE9I6Yk+elxBjw2WxoZLI2OlIe3XgXsl3mma+2Gx61EJvE7ZUI8NNhOXBSiXT7QeBQhpCTEtLqUh/TREURwdKg7fLQ6NFQV+/co3WeiZKdydK3Cs5MKPyxavBX44mj2GCxFxASItiPUXRG/lR4byQ8P5gV++9Om+8N6n7hnzdsxU25Ms69C4vJkABSiPT3D/DrhBjXVTo1JqpJ8avpUXup0XGPncp8n16nP3DRSn8Ty8ctpm+G6KS7Twce5x+QKfj3RTwj2U0E1KcOCzwO1PfSPnPOPn9ieyXYYc+1zG5nze4k/b16DDg3m8f+KcUHdOsCc7cDPbP/DJgepjj/rsnjbLOXHWbkqD59MtnU87WshZ7FAedQxn+buz/L2ZB/JMjzJj/07G7uiZHW0GbHh/0/jRbz33JORT+ehLefwTQFe69+d0T+9pt/zU7tCHzuFTW6NnNibf2ZzMXOxYIzdBQYr/b3kU0JW2Jzm5K/tgR3FyazDNpn7Xpn/z2d3qyR83r0Pktf+1+RKLTjgkJ+x978HKt20jr28Mpy906Xp58dZDib9KHmLxG7DsNZv8rT/7qcbursEr7naIaOZhPD5GXst7dYAw70HHjaH2tQ5eikcyLvknSIbz/leS/QUhSB2zAMlZmgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Before antialiasing\"\n        title=\"Before antialiasing\"\n        src=\"/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png\"\n        srcset=\"/static/2915b0569f0479d36a85b8569e570696/0608e/before-antialiasing.png 225w,\n/static/2915b0569f0479d36a85b8569e570696/e3135/before-antialiasing.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Before antialiasing</figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28e0b66cff86264ab866b3a3afb770c9/e3135/after-antialiasing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD+ElEQVQ4y4XS609adxjA8fN3LMte9OXe9M2azaxauzqrNtWpUZaqkw4r8UorE+cBflzc1tplGyhYUKwgqFiLFS1ehlV03mg13TLaTZnnoBMFUeR+OZzLcE06XXZJvm8/eZ5ffg8kAaQMkPcAoQK4GiS0ABsA8YcgagRhEwiagd8CvEvAswp2bcCB8m1Pf/DPIJRlnbRsUJCES8q4pIJLqLi4mpvQcrEBOP4QjhrhsAkOmmG/BfYuwfursNMGoyhssy4HZ1Fqbp2Y2yAhSRMpayIUTYSqCVdzEloONsCJGZqiRk7YxAmaOT5L4+FS4/5ao/PFZwjS/PLps9jCJrWwQS3Yk5PZpIxNKNiEio2r2QkdG9OzY4aGiLEhZGoImBt8lluHy7fcaw07L+s27cA2u+F6suW3IKH5TQyS3CRkNwkFC1exEmoWpmPF9ayogRUx1ofG6wPm+qO5uoPlOtdq/ba9Al1pm/qKAq14y9eJO99i30CSWkJWiytqcVVtQl2L6Wri+pqooSZsrA6OV/unq71zVZ6Vqt21agdagoyN9PEoTgvOE1GwiGqGJExcxsSVzISKiamZcR0zpq+MGCpDo5WB8Ru+6RuH8xX7KxXO5wzUTrd1/vIdn+K2EIIWCiSDJBUJWUVCycBUjLiaEdMxIoOM8PCnodHr/onr3id0zzzdZaVvvaChVjDbggMRxReTfDF1HCSlY3I6pqDHu8tjmvJoX3l4sDw4/ElgrOxoouxwptS9UOK0lqHrufZBk5pLNYsJgYgCr4KkpXF5aUxZGusuiWpKIn0locFrgUfXfI8/9k7SPLPFewu07ed5yLOqxdshsZDii0hwAtNiclpUSYt0F4c1xaH+4sBQke9RkfdxoWeqwGXJ31ksQH7O/LV3qotLwWJCKKIEr4OkhRF5YVhZGLpfEOwtCPTn+4byvSMfHZjy3OZcpyUPXbuATH8+dTwzCUjBaZwbkucGlbmB+1f92qu+gSveoSsHxhz3ePbudI5jKX1zsch6d+cO/3jhU2OPcVtOoCM70Jnt68k60mYd6i97DJnu0YzdiUyH5TyydPFH2aqUR/FEhFBICV51An/o68g46szw9lw60F3a13+wN5y+M3YRNb+LzL3/k2Kmg5e8B/wvedJDbRcO7qV5utL21amuvvO7D1K3h9M3J89uTl62ti+385MzE6K/yddB7SluRcpe93tOTcrvfSmo4SwyfsY+xPi+1dHKo7hCQvBv8k98bltxbqv7HVT7NjL01m8PUq2Knl5RTABOv/OfsfyMo+tNVPPGuiZtuUPa/6XrdnJVQfI/yeS2wv8Oasual7JH7poUYv8XgOIKkgdEiISk8H9lsj8AJNkfdyR8ZAUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"After antialiasing\"\n        title=\"After antialiasing\"\n        src=\"/static/28e0b66cff86264ab866b3a3afb770c9/e3135/after-antialiasing.png\"\n        srcset=\"/static/28e0b66cff86264ab866b3a3afb770c9/0608e/after-antialiasing.png 225w,\n/static/28e0b66cff86264ab866b3a3afb770c9/e3135/after-antialiasing.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">After antialiasing</figcaption>\n  </figure></p>\n<p>This isn't for free though!\nRunning the debug build takes nearly 30s, when before it was nearly instant:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=austind data-host=localhost></span><span></span><span></span><span data-user=austind data-host=localhost></span><span></span><span></span><span></span><span></span><span></span><span></span></span>cargo build\n   Compiling ray-tracing-in-one-weekend-with-rust v0.1.0 <span class=\"token punctuation\">(</span>/home/austind/Documents/github.com/austindoupnik/ray-tracing-in-one-weekend-with-rust<span class=\"token punctuation\">)</span>\n    Finished dev <span class=\"token punctuation\">[</span>unoptimized + debuginfo<span class=\"token punctuation\">]</span> target<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.56s\n<span class=\"token function\">time</span> ./target/debug/ray-tracing-in-one-weekend-with-rust <span class=\"token operator\">></span> image.ppm \nScanlines remaining: <span class=\"token number\">0</span>   \nDone.\n\nreal    0m28.905s\nuser    0m28.387s\nsys     0m0.380s</code></pre></div>\n<p>Luckily the release build is much faster:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=austind data-host=localhost></span><span></span><span data-user=austind data-host=localhost></span><span></span><span></span><span></span><span></span><span></span><span></span></span>cargo build --release\n    Finished release <span class=\"token punctuation\">[</span>optimized<span class=\"token punctuation\">]</span> target<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.02s\n<span class=\"token function\">time</span> ./target/release/ray-tracing-in-one-weekend-with-rust <span class=\"token operator\">></span> image.ppm \nScanlines remaining: <span class=\"token number\">0</span>   \nDone.\n\nreal    0m0.934s\nuser    0m0.776s\nsys     0m0.156s</code></pre></div>\n<p>The complete code is <a href=\"https://github.com/austindoupnik/ray-tracing-in-one-weekend-with-rust/tree/v0.0.1-chapter.7\">available here</a>.</p>","frontmatter":{"title":"Ch 7. Antialiasing","series":{"title":"Ray Tracing in One Weekend with Rust","part":6},"date":"October 22, 2020","tags":["rust","ray tracing"]},"fields":{"slug":"/post/2020-10/antialiasing/"}}},"pageContext":{"slug":"/post/2020-10/antialiasing/","previous":{"fields":{"slug":"/post/2020-10/surface-normals-and-multiple-objects/"},"frontmatter":{"title":"Ch 6. Surface Normals and Multiple Objects"}},"next":{"fields":{"slug":"/post/2020-10/diffuse-materials/"},"frontmatter":{"title":"Ch 8. Diffuse Materials"}}}},"staticQueryHashes":["1242404783","1672915144","1933047930","2463615370"]}