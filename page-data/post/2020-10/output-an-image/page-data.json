{"componentChunkName":"component---src-templates-blog-post-blog-post-tsx","path":"/post/2020-10/output-an-image/","result":{"data":{"markdownRemark":{"html":"<p>My interest in programming has always been related to my interest in graphics.\nThe first substantial program I wrote was a 2D plotting program in <a href=\"https://el.media.mit.edu/logo-foundation/resources/logoupdate/v8n2/terrapin.html\">Terrapin Logo</a>, followed quickly by a deep dive into the world of C++ and OpenGL.\nWhile in undergrad, I was sure to take a 3D graphics course, where we built a ray tracer by following <a href=\"http://www.cs.cornell.edu/~srm/fcg3/\">Peter Shirley's Fundamentals of Computer Graphics</a>.\nRecently I discovered <a href=\"https://raytracing.github.io/books/RayTracingInOneWeekend.html\">Peter Shirley's Ray Tracing in One Weekend</a>, and figured I would take the opportunity to learn more about Rust and create a few short write-ups for motivation.</p>\n<h3 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h3>\n<p>In general, I will avoid covering too much theory since it is covered better by Shirley, I recommend reading along in the source material, but as a quick introduction I will summarize ray tracing.\nRay tracing is the process of simulating (in a very rudimentary way) the physics of light reflecting off objects to produce a 2D image.\nAs such ray tracing is generally very good at simulating more complex lighting effects like shadows, reflections, highlights on shiny materials, diffraction, diffusion, and other effects resulting from light passing through transparent materials.\nThe downside of ray tracing is that it is generally quite slow, with more complex features requiring longer simulation times.\nThis is in contrast to \"raster\" graphics pipelines which apply matrix operations to points in space to map a 3D scene to a 2D image, this is very fast, but does not handle lighting effects well.\nIn recent years the lines between these two approaches have become progressively more blurred with the advent of programmable graphics pipelines (shaders), and other techniques to better simulate lighting in raster pipelines.</p>\n<p>With that out of the way, let's get started with <a href=\"https://raytracing.github.io/books/RayTracingInOneWeekend.html#outputanimage\">Chapter 2: Output an Image</a>.</p>\n<h3 id=\"project-setup\" style=\"position:relative;\"><a href=\"#project-setup\" aria-label=\"project setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Project Setup</h3>\n<p>The first thing to do is create an empty Rust project using <code>cargo</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=austind data-host=localhost></span><span></span><span data-user=austind data-host=localhost></span><span data-user=austind data-host=localhost></span><span data-user=austind data-host=localhost></span><span></span><span></span><span></span><span></span><span></span></span>cargo new ray-tracing-in-one-weekend-with-rust\n     Created binary <span class=\"token punctuation\">(</span>application<span class=\"token punctuation\">)</span> <span class=\"token variable\"><span class=\"token variable\">`</span>ray-tracing-in-one-weekend-with-rust<span class=\"token variable\">`</span></span> package\n<span class=\"token builtin class-name\">cd</span> ray-tracing-in-one-weekend-with-rust/\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">'Add project generated with cargo new'</span>\n<span class=\"token punctuation\">[</span>master <span class=\"token punctuation\">(</span>root-commit<span class=\"token punctuation\">)</span> 049d97d<span class=\"token punctuation\">]</span> Add project generated with cargo new\n <span class=\"token number\">3</span> files changed, <span class=\"token number\">13</span> insertions<span class=\"token punctuation\">(</span>+<span class=\"token punctuation\">)</span>\n create mode <span class=\"token number\">100644</span> .gitignore\n create mode <span class=\"token number\">100644</span> Cargo.toml\n create mode <span class=\"token number\">100644</span> src/main.rs</code></pre></div>\n<h3 id=\"the-ppm-image-format\" style=\"position:relative;\"><a href=\"#the-ppm-image-format\" aria-label=\"the ppm image format permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The PPM Image Format</h3>\n<p>The chapter starts with a small example of generating a <a href=\"https://en.wikipedia.org/wiki/Netpbm#PPM_example\">PPM</a> image.\nThe PPM format is a very simple text based image format, it has a header with the width and height, followed by a line for each pixel's color.\nThis format is ideal since it is easy to generate and doesn't require any additional libraries, the downside being that it is unsupported by many image viewers.\nIn the future I will likely look into generating a more user-friendly image format.\nTranslating the C++ program into Rust results in:</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">IMAGE_HEIGHT</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"P3\\n{} {}\\n255\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token constant\">IMAGE_HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">rev</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token constant\">IMAGE_WIDTH</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> r<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">IMAGE_WIDTH</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> g<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">IMAGE_HEIGHT</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> b<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">let</span> ir<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> r<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> ig<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> g<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> ib<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token macro property\">print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{} {} {}\\n\"</span><span class=\"token punctuation\">,</span> ir<span class=\"token punctuation\">,</span> ig<span class=\"token punctuation\">,</span> ib<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"creating-an-image-file\" style=\"position:relative;\"><a href=\"#creating-an-image-file\" aria-label=\"creating an image file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating an Image File</h3>\n<p>Using <code>cargo run</code> we can generate the image by redirecting <code>stdout</code> to <code>image.ppm</code>, the well-known image toolkit <a href=\"https://imagemagick.org/index.php\">ImageMagick</a> can be used to display the result.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=austind data-host=localhost></span><span></span><span></span><span data-user=austind data-host=localhost></span><span></span><span data-user=austind data-host=localhost></span></span>cargo run <span class=\"token operator\">></span> image.ppm\n    Finished dev <span class=\"token punctuation\">[</span>unoptimized + debuginfo<span class=\"token punctuation\">]</span> target<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.01s\n     Running <span class=\"token variable\"><span class=\"token variable\">`</span>target/debug/ray-tracing-in-one-weekend-with-rust<span class=\"token variable\">`</span></span>\n<span class=\"token function\">file</span> image.ppm \nimage.ppm: Netpbm image data, size <span class=\"token operator\">=</span> <span class=\"token number\">256</span> x <span class=\"token number\">256</span>, pixmap, ASCII text\ndisplay image.ppm</code></pre></div>\n<p>ImageMagick can also be used to convert the image into a more standard image format like PNG.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=austind data-host=localhost></span><span data-user=austind data-host=localhost></span><span></span></span>convert image.ppm image.png\n<span class=\"token function\">file</span> image.png \nimage.png: PNG image data, <span class=\"token number\">256</span> x <span class=\"token number\">256</span>, <span class=\"token number\">8</span>-bit/color RGB, non-interlaced</code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2f450767f5852722d976e11df61bd2c/e3135/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAC3ElEQVQ4yw3LQQFFMACA4XdaAQIsAAG4/DcCTIAFIAABCMB9C2ABLAABuE8AAnB6vvv3Ey/Ri3xJXrKX4kW96Jf6pX3pX8YX8zK/LC/ry/4SXq6X5+UnbqIbeZPcZDfFjbrRN/VNe9PfjDfmZr5Zbtab/SbcXDfP/eWT6ESeJCfZSXGiTvRJfdKe9CfjiTmZT5aT9WQ/CSfXyXN++SA6kAfJQXZQHKgDfVAftAf9wXhgDuaD5WA92A/CwXXwHF/eiDbkRrKRbRQbakNv1BvtRr8xbpiNeWPZWDf2jbBxbTzblz2RR3oST+YpPMqjPbWn9fSe0WM8s2fxrJ7dEzyX5/FfdkQO6UgcmaNwKId21I7W0TtGh3HMjsWxOnZHcFyOx33ZElmkJbFklsKiLNpSW1pLbxktxjJbFstq2S3Bclke++WJaEJOJBPZRDGhJvREPdFO9BPjhJmYJ5aJdWKfCBPXxDN9eSAakAPJQDZQDKgBPVAPtAP9wDhgBuaBZWAd2AfCwDXwDF/uiDpkR9KRdRQdqkN31B1tR98xdpiOuWPpWDv2jtBxdTzdlxuiBtmQNGQNRYNq0A11Q9vQN4wNpmFuWBrWhr0hNFwNT/NlTaSRmkSTaQqN0mhNrWk1vWbUGM2sWTSrZtcEzaV59JcrogpZkVRkFUWFqtAVdUVb0VeMFaZirlgq1oq9IlRcFU/15ZKoRJYkJVlJUaJKdEld0pb0JWOJKZlLlpK1ZC8JJVfJU345J8qROUlOllPkqBydU+e0OX3OmGNy5pwlZ83Zc0LOlfPkX06JUmRKkpKlFCkqRafUKW1KnzKmmJQ5ZUlZU/aUkHKlPOmXJZFEShJJJikkSqIltaSV9JJRYiSzZJGskl0SJJfkkV+OiWJkTBKTxRQxKkbH1DFtTB8zxpiYOWaJWWP2mBBzxTzxlwWRQAoSQSYoBEqgBbWgFfSCUWAEs2ARrIJdEASX4BH8AZ9Y8kQ0MpcXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"First PPM image\"\n        title=\"First PPM image\"\n        src=\"/static/b2f450767f5852722d976e11df61bd2c/e3135/image.png\"\n        srcset=\"/static/b2f450767f5852722d976e11df61bd2c/0608e/image.png 225w,\n/static/b2f450767f5852722d976e11df61bd2c/e3135/image.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">First PPM image</figcaption>\n  </figure></p>\n<h3 id=\"adding-a-progress-indicator\" style=\"position:relative;\"><a href=\"#adding-a-progress-indicator\" aria-label=\"adding a progress indicator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding a Progress Indicator</h3>\n<p>Finally, the chapter wraps up with a small addition, a simple progress indicator for each y-coordinate written to <code>stderr</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber 0\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">IMAGE_HEIGHT</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"P3\\n{} {}\\n255\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">IMAGE_WIDTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token constant\">IMAGE_HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">rev</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token macro property\">eprint!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\rScanlines remaining: {} \"</span><span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token constant\">IMAGE_WIDTH</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> r<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">IMAGE_WIDTH</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> g<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">IMAGE_HEIGHT</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">f64</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> b<span class=\"token punctuation\">:</span> <span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">let</span> ir<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> r<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> ig<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> g<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> ib<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255.999</span> <span class=\"token operator\">*</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token macro property\">print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{} {} {}\\n\"</span><span class=\"token punctuation\">,</span> ir<span class=\"token punctuation\">,</span> ig<span class=\"token punctuation\">,</span> ib<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token macro property\">eprint!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nDone.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The complete code is <a href=\"https://github.com/austindoupnik/ray-tracing-in-one-weekend-with-rust/tree/v0.0.1-chapter.2\">available here</a>.</p>","frontmatter":{"title":"Ch 2. Output an Image","series":{"title":"Ray Tracing in One Weekend with Rust","part":1},"date":"October 05, 2020","tags":["rust","ray tracing"]},"fields":{"slug":"/post/2020-10/output-an-image/"}}},"pageContext":{"slug":"/post/2020-10/output-an-image/","previous":null,"next":{"fields":{"slug":"/post/2020-10/the-vec3-class/"},"frontmatter":{"title":"Ch 3. The vec3 Class"}}}},"staticQueryHashes":["1242404783","1672915144","1933047930","2463615370"]}